{"mappings":"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","sources":["<anon>","src/index.mjs","node_modules/stats.js/build/stats.min.js","src/consts.js","src/Piece.js","src/piece_types.js","src/utils.js","node_modules/@parcel/runtime-js/lib/runtime-a51da53e0e6c85eb.js"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nvar $8d6448069697305c$exports = {};\n// stats.js - http://github.com/mrdoob/stats.js\n(function(f, e) {\n    $8d6448069697305c$exports = e();\n})($8d6448069697305c$exports, function() {\n    var f = function() {\n        function e(a) {\n            c.appendChild(a.dom);\n            return a;\n        }\n        function u(a) {\n            for(var d = 0; d < c.children.length; d++)c.children[d].style.display = d === a ? \"block\" : \"none\";\n            l = a;\n        }\n        var l = 0, c = document.createElement(\"div\");\n        c.style.cssText = \"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";\n        c.addEventListener(\"click\", function(a) {\n            a.preventDefault();\n            u(++l % c.children.length);\n        }, !1);\n        var k = (performance || Date).now(), g = k, a = 0, r = e(new f.Panel(\"FPS\", \"#0ff\", \"#002\")), h = e(new f.Panel(\"MS\", \"#0f0\", \"#020\"));\n        if (self.performance && self.performance.memory) var t = e(new f.Panel(\"MB\", \"#f08\", \"#201\"));\n        u(0);\n        return {\n            REVISION: 16,\n            dom: c,\n            addPanel: e,\n            showPanel: u,\n            begin: function() {\n                k = (performance || Date).now();\n            },\n            end: function() {\n                a++;\n                var c = (performance || Date).now();\n                h.update(c - k, 200);\n                if (c > g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {\n                    var d = performance.memory;\n                    t.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);\n                }\n                return c;\n            },\n            update: function() {\n                k = this.end();\n            },\n            domElement: c,\n            setMode: u\n        };\n    };\n    f.Panel = function(e, f, l) {\n        var c = Infinity, k = 0, g = Math.round, a = g(window.devicePixelRatio || 1), r = 80 * a, h = 48 * a, t = 3 * a, v = 2 * a, d = 3 * a, m = 15 * a, n = 74 * a, p = 30 * a, q = document.createElement(\"canvas\");\n        q.width = r;\n        q.height = h;\n        q.style.cssText = \"width:80px;height:48px\";\n        var b = q.getContext(\"2d\");\n        b.font = \"bold \" + 9 * a + \"px Helvetica,Arial,sans-serif\";\n        b.textBaseline = \"top\";\n        b.fillStyle = l;\n        b.fillRect(0, 0, r, h);\n        b.fillStyle = f;\n        b.fillText(e, t, v);\n        b.fillRect(d, m, n, p);\n        b.fillStyle = l;\n        b.globalAlpha = .9;\n        b.fillRect(d, m, n, p);\n        return {\n            dom: q,\n            update: function(h, w) {\n                c = Math.min(c, h);\n                k = Math.max(k, h);\n                b.fillStyle = l;\n                b.globalAlpha = 1;\n                b.fillRect(0, 0, r, m);\n                b.fillStyle = f;\n                b.fillText(g(h) + \" \" + e + \" (\" + g(c) + \"-\" + g(k) + \")\", t, v);\n                b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p);\n                b.fillRect(d + n - a, m, a, p);\n                b.fillStyle = l;\n                b.globalAlpha = .9;\n                b.fillRect(d + n - a, m, a, g((1 - h / w) * p));\n            }\n        };\n    };\n    return f;\n});\n\n\nconst $49d500b8b6ab9673$export$b2e3d6d444266a5c = 20;\nconst $49d500b8b6ab9673$export$eefabe5abfdf297 = 30;\nconst $49d500b8b6ab9673$export$c89d6b8b907791b2 = 20;\nconst $49d500b8b6ab9673$export$9c128711043fc6af = 400;\n\n\n\nconst $19e6dc64dd2777d6$export$e5362b113ee68aab = [\n    [\n        1,\n        1\n    ],\n    [\n        1,\n        1\n    ]\n];\nconst $19e6dc64dd2777d6$export$47188e1cb650d39f = [\n    [\n        1\n    ],\n    [\n        1\n    ],\n    [\n        1\n    ],\n    [\n        1\n    ]\n];\nconst $19e6dc64dd2777d6$export$2d9ee20dd06ffc3c = [\n    [\n        0,\n        1,\n        1\n    ],\n    [\n        1,\n        1,\n        0\n    ]\n];\nconst $19e6dc64dd2777d6$export$ea94af9ebe9aba84 = [\n    [\n        1,\n        1,\n        0\n    ],\n    [\n        0,\n        1,\n        1\n    ]\n];\nconst $19e6dc64dd2777d6$export$1340c96f6308a954 = [\n    [\n        1,\n        0\n    ],\n    [\n        1,\n        0\n    ],\n    [\n        1,\n        1\n    ]\n];\nconst $19e6dc64dd2777d6$export$3895ce1eadf0f447 = [\n    [\n        0,\n        1\n    ],\n    [\n        0,\n        1\n    ],\n    [\n        1,\n        1\n    ]\n];\nconst $19e6dc64dd2777d6$export$6feefca9a7b98709 = [\n    [\n        1,\n        1,\n        1\n    ],\n    [\n        0,\n        1,\n        0\n    ]\n];\nconst $19e6dc64dd2777d6$export$aa7c01442f64e45d = [\n    $19e6dc64dd2777d6$export$e5362b113ee68aab,\n    $19e6dc64dd2777d6$export$47188e1cb650d39f,\n    $19e6dc64dd2777d6$export$2d9ee20dd06ffc3c,\n    $19e6dc64dd2777d6$export$ea94af9ebe9aba84,\n    $19e6dc64dd2777d6$export$1340c96f6308a954,\n    $19e6dc64dd2777d6$export$3895ce1eadf0f447,\n    $19e6dc64dd2777d6$export$6feefca9a7b98709\n];\n\n\nclass $7fa2ef4a82b1aacf$export$7de691058ff51291 {\n    x = 0;\n    y = 0;\n    shape;\n    board;\n    startPosition;\n    constructor(board, startPosition){\n        this.board = board;\n        this.startPosition = startPosition;\n        this.restart();\n    }\n    movePieceDown() {\n        if (this.isPositionValid(this.x, this.y + 1, this.shape)) this.y++;\n        else this.solidifyPiece();\n    }\n    movePieceRight() {\n        if (this.isPositionValid(this.x + 1, this.y, this.shape)) this.x++;\n    }\n    movePieceLeft() {\n        if (this.isPositionValid(this.x - 1, this.y, this.shape)) this.x--;\n    }\n    rotatePiece() {\n        const rotatedShape = this.shape[0].map((_, index)=>this.shape.map((row)=>row[index]).reverse());\n        if (this.isPositionValid(this.x, this.y, rotatedShape)) this.shape = rotatedShape;\n    }\n    isPositionValid(x, y, shape) {\n        // Check left border\n        if (x < 0) return false;\n        // Check right border\n        if (x + shape[0].length > (0, $49d500b8b6ab9673$export$eefabe5abfdf297)) return false;\n        // Check bottom border\n        if (y + shape.length > (0, $49d500b8b6ab9673$export$c89d6b8b907791b2)) return false;\n        // Check if the piece overlaps with existing blocks on the board\n        return !shape.some((row, sy)=>{\n            return row.some((cell, sx)=>{\n                if (!cell) return false;\n                return this.board[y + sy][x + sx];\n            });\n        });\n    }\n    solidifyPiece() {\n        const x = this.x;\n        const y = this.y;\n        this.shape.forEach((row, sy)=>{\n            row.forEach((cell, sx)=>{\n                if (!cell) return false;\n                this.board[y + sy][x + sx] = 1;\n            });\n        });\n        this.restart();\n    }\n    restart() {\n        this.x = this.startPosition.x;\n        this.y = this.startPosition.y;\n        this.shape = (0, $19e6dc64dd2777d6$export$aa7c01442f64e45d)[Math.floor(Math.random() * (0, $19e6dc64dd2777d6$export$aa7c01442f64e45d).length)];\n    }\n}\n\n\nfunction $820877bea407f5fe$export$9bdad1ae37d738e0(h, w) {\n    return Array.from({\n        length: h\n    }, ()=>new Array(w).fill(0));\n}\n\n\nvar $c2989a971868ffe5$exports = {};\n$c2989a971868ffe5$exports = import.meta.resolve(\"PSiwf\");\n\n\nconst $761f97bf09d51d3e$var$stats = new (0, (/*@__PURE__*/$parcel$interopDefault($8d6448069697305c$exports)))();\n$761f97bf09d51d3e$var$stats.dom.style.left = \"unset\";\n$761f97bf09d51d3e$var$stats.dom.style.right = '0';\n$761f97bf09d51d3e$var$stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\ndocument.body.appendChild($761f97bf09d51d3e$var$stats.dom);\nconst $761f97bf09d51d3e$var$canvas = document.querySelector(\"canvas\");\nconst $761f97bf09d51d3e$var$ctx = $761f97bf09d51d3e$var$canvas.getContext(\"2d\");\nconst $761f97bf09d51d3e$var$board = (0, $820877bea407f5fe$export$9bdad1ae37d738e0)((0, $49d500b8b6ab9673$export$c89d6b8b907791b2), (0, $49d500b8b6ab9673$export$eefabe5abfdf297));\nconst $761f97bf09d51d3e$var$pieceLeft = new (0, $7fa2ef4a82b1aacf$export$7de691058ff51291)($761f97bf09d51d3e$var$board, {\n    x: 2,\n    y: 0\n});\nconst $761f97bf09d51d3e$var$pieceRight = new (0, $7fa2ef4a82b1aacf$export$7de691058ff51291)($761f97bf09d51d3e$var$board, {\n    x: (0, $49d500b8b6ab9673$export$eefabe5abfdf297) - 5,\n    y: 0\n});\n$761f97bf09d51d3e$var$canvas.width = (0, $49d500b8b6ab9673$export$b2e3d6d444266a5c) * (0, $49d500b8b6ab9673$export$eefabe5abfdf297);\n$761f97bf09d51d3e$var$canvas.height = (0, $49d500b8b6ab9673$export$b2e3d6d444266a5c) * (0, $49d500b8b6ab9673$export$c89d6b8b907791b2);\n$761f97bf09d51d3e$var$ctx.scale((0, $49d500b8b6ab9673$export$b2e3d6d444266a5c), (0, $49d500b8b6ab9673$export$b2e3d6d444266a5c));\nlet $761f97bf09d51d3e$var$nextTickTime = 0;\nfunction $761f97bf09d51d3e$var$update(time) {\n    $761f97bf09d51d3e$var$stats.begin();\n    $761f97bf09d51d3e$var$draw();\n    if (time > $761f97bf09d51d3e$var$nextTickTime) {\n        $761f97bf09d51d3e$var$nextTickTime = time + (0, $49d500b8b6ab9673$export$9c128711043fc6af);\n        $761f97bf09d51d3e$var$executeTick(time);\n    }\n    $761f97bf09d51d3e$var$stats.end();\n    window.requestAnimationFrame($761f97bf09d51d3e$var$update);\n}\nfunction $761f97bf09d51d3e$var$draw() {\n    $761f97bf09d51d3e$var$ctx.fillStyle = \"#000\";\n    $761f97bf09d51d3e$var$ctx.fillRect(0, 0, $761f97bf09d51d3e$var$canvas.width, $761f97bf09d51d3e$var$canvas.height);\n    $761f97bf09d51d3e$var$drawBoard();\n    $761f97bf09d51d3e$var$drawPiece($761f97bf09d51d3e$var$pieceLeft);\n    $761f97bf09d51d3e$var$drawPiece($761f97bf09d51d3e$var$pieceRight);\n}\nfunction $761f97bf09d51d3e$var$executeTick() {\n    $761f97bf09d51d3e$var$pieceLeft.movePieceDown();\n    $761f97bf09d51d3e$var$pieceRight.movePieceDown();\n    $761f97bf09d51d3e$var$clearCompletedRows();\n}\nfunction $761f97bf09d51d3e$var$drawBoard() {\n    $761f97bf09d51d3e$var$ctx.fillStyle = \"yellow\";\n    $761f97bf09d51d3e$var$board.forEach((row, y)=>{\n        row.forEach((cell, x)=>{\n            if (cell === 1) $761f97bf09d51d3e$var$ctx.fillRect(x, y, 1, 1);\n        });\n    });\n}\nfunction $761f97bf09d51d3e$var$drawPiece(piece) {\n    $761f97bf09d51d3e$var$ctx.fillStyle = \"red\";\n    piece.shape.forEach((row, y)=>{\n        row.forEach((cell, x)=>{\n            if (!cell) return;\n            $761f97bf09d51d3e$var$ctx.fillRect(piece.x + x, piece.y + y, 1, 1);\n        });\n    });\n}\nfunction $761f97bf09d51d3e$var$clearCompletedRows() {\n    for(let y = $761f97bf09d51d3e$var$board.length - 1; y >= 0; y--)if ($761f97bf09d51d3e$var$board[y].every((cell)=>cell === 1)) {\n        $761f97bf09d51d3e$var$board.splice(y, 1);\n        $761f97bf09d51d3e$var$board.unshift(Array((0, $49d500b8b6ab9673$export$eefabe5abfdf297)).fill(0));\n        y++; // Recheck this row after shifting\n    }\n}\nfunction $761f97bf09d51d3e$var$startGame() {\n    document.querySelector('#start').hidden = true;\n    const audio = new Audio((0, (/*@__PURE__*/$parcel$interopDefault($c2989a971868ffe5$exports))));\n    audio.play();\n    $761f97bf09d51d3e$var$update();\n    document.addEventListener(\"keydown\", (evt)=>{\n        if (evt.key === \"ArrowDown\") $761f97bf09d51d3e$var$pieceRight.movePieceDown();\n        else if (evt.key === \"ArrowLeft\") $761f97bf09d51d3e$var$pieceRight.movePieceLeft();\n        else if (evt.key === \"ArrowRight\") $761f97bf09d51d3e$var$pieceRight.movePieceRight();\n        else if (evt.key === \"ArrowUp\") $761f97bf09d51d3e$var$pieceRight.rotatePiece();\n        else if (evt.key === \"s\") $761f97bf09d51d3e$var$pieceLeft.movePieceDown();\n        else if (evt.key === \"a\") $761f97bf09d51d3e$var$pieceLeft.movePieceLeft();\n        else if (evt.key === \"d\") $761f97bf09d51d3e$var$pieceLeft.movePieceRight();\n        else if (evt.key === \"w\") $761f97bf09d51d3e$var$pieceLeft.rotatePiece();\n    });\n}\ndocument.querySelector('#start').addEventListener('click', $761f97bf09d51d3e$var$startGame);\n\n\n//# sourceMappingURL=bitetris.af7dccb2.js.map\n","import \"./styles.css\";\nimport Stats from \"stats.js\";\nimport {BLOCK_SIZE, BOARD_HEIGHT, BOARD_WIDTH, TICK_TIME} from \"./consts.js\";\nimport {Piece} from \"./Piece.js\";\nimport {matrix} from \"./utils.js\";\nimport music from \"url:./assets/tetris.mp3\";\n\nconst stats = new Stats();\nstats.dom.style.left = \"unset\";\nstats.dom.style.right = '0';\nstats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\ndocument.body.appendChild(stats.dom);\n\nconst canvas = document.querySelector(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nconst board = matrix(BOARD_HEIGHT, BOARD_WIDTH)\n\nconst pieceLeft = new Piece(board, {x: 2, y: 0});\nconst pieceRight = new Piece(board, {x: BOARD_WIDTH - 5, y: 0})\n\ncanvas.width = BLOCK_SIZE * BOARD_WIDTH;\ncanvas.height = BLOCK_SIZE * BOARD_HEIGHT;\n\nctx.scale(BLOCK_SIZE, BLOCK_SIZE);\n\nlet nextTickTime = 0;\nfunction update(time) {\n  stats.begin();\n  draw();\n  if (time > nextTickTime) {\n    nextTickTime = time + TICK_TIME;\n    executeTick(time);\n  }\n  stats.end();\n  window.requestAnimationFrame(update);\n}\n\nfunction draw() {\n  ctx.fillStyle = \"#000\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  drawBoard();\n  drawPiece(pieceLeft);\n  drawPiece(pieceRight);\n}\n\nfunction executeTick() {\n  pieceLeft.movePieceDown()\n  pieceRight.movePieceDown()\n  clearCompletedRows()\n}\n\nfunction drawBoard() {\n  ctx.fillStyle = \"yellow\";\n  board.forEach((row, y) => {\n    row.forEach((cell, x) => {\n      if (cell === 1) {\n        ctx.fillRect(x, y, 1, 1);\n      }\n    });\n  });\n}\n\nfunction drawPiece(piece) {\n  ctx.fillStyle = \"red\";\n  piece.shape.forEach((row, y) => {\n    row.forEach((cell, x) => {\n      if (!cell) return;\n      ctx.fillRect(piece.x + x, piece.y + y, 1, 1);\n    });\n  });\n}\n\nfunction clearCompletedRows() {\n  for (let y = board.length - 1; y >= 0; y--) {\n    if (board[y].every(cell => cell === 1)) {\n      board.splice(y, 1);\n      board.unshift(Array(BOARD_WIDTH).fill(0));\n      y++; // Recheck this row after shifting\n    }\n  }\n}\n\nfunction startGame() {\n  document.querySelector('#start').hidden = true;\n  const audio = new Audio(music);\n  audio.play();\n  update();\n  document.addEventListener(\"keydown\", (evt) => {\n    if (evt.key === \"ArrowDown\") {\n      pieceRight.movePieceDown()\n    } else if (evt.key === \"ArrowLeft\") {\n      pieceRight.movePieceLeft();\n    } else if (evt.key === \"ArrowRight\") {\n      pieceRight.movePieceRight()\n    } else if (evt.key === \"ArrowUp\") {\n      pieceRight.rotatePiece()\n    } else if (evt.key === \"s\") {\n      pieceLeft.movePieceDown()\n    } else if (evt.key === \"a\") {\n      pieceLeft.movePieceLeft();\n    } else if (evt.key === \"d\") {\n      pieceLeft.movePieceRight()\n    } else if (evt.key === \"w\") {\n      pieceLeft.rotatePiece()\n    }\n  });\n}\n\ndocument.querySelector('#start').addEventListener('click', startGame)\n\n\n\n","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","export const BLOCK_SIZE = 20;\nexport const BOARD_WIDTH = 30;\nexport const BOARD_HEIGHT = 20;\nexport const TICK_TIME = 400;","import {BOARD_HEIGHT, BOARD_WIDTH} from \"./consts\";\nimport {allShapes} from \"./piece_types\";\n\nexport class Piece {\n    x = 0\n    y = 0\n    shape\n    board\n    startPosition\n\n    constructor(board, startPosition) {\n        this.board = board;\n        this.startPosition = startPosition;\n        this.restart()\n    }\n\n    movePieceDown() {\n        if (this.isPositionValid(this.x, this.y + 1, this.shape)) {\n            this.y++;\n        } else {\n            this.solidifyPiece();\n        }\n    }\n\n    movePieceRight() {\n        if (this.isPositionValid(this.x+1, this.y, this.shape)) {\n            this.x++;\n        }\n    }\n\n    movePieceLeft() {\n        if (this.isPositionValid(this.x-1, this.y, this.shape)) {\n            this.x--\n        }\n    }\n\n    rotatePiece() {\n        const rotatedShape = this.shape[0].map(\n            (_, index) => this.shape.map(row => row[index]).reverse()\n        );\n\n        if (this.isPositionValid(this.x, this.y, rotatedShape)) {\n            this.shape = rotatedShape;\n        }\n    }\n\n    isPositionValid(x, y, shape) {\n        // Check left border\n        if (x < 0) {\n            return false;\n        }\n\n        // Check right border\n        if (x+shape[0].length > BOARD_WIDTH) {\n            return false;\n        }\n\n        // Check bottom border\n        if (y+shape.length > BOARD_HEIGHT) {\n            return false;\n        }\n\n        // Check if the piece overlaps with existing blocks on the board\n        return !shape.some((row, sy) => {\n            return row.some((cell, sx) => {\n                if(!cell) return false;\n                return this.board[y + sy][x + sx]\n            })\n        })\n    }\n\n    solidifyPiece() {\n        const x = this.x;\n        const y = this.y;\n        this.shape.forEach((row, sy) => {\n            row.forEach((cell, sx) => {\n                if(!cell) return false;\n                this.board[y + sy][x + sx] = 1\n            })\n        })\n        this.restart()\n    }\n\n    restart() {\n        this.x = this.startPosition.x;\n        this.y = this.startPosition.y;\n        this.shape = allShapes[Math.floor(Math.random() * allShapes.length)];\n    }\n}","export const CUBE = [\n  [1, 1],\n  [1, 1],\n];\n\nexport const SHAPE_I = [\n  [1],\n  [1],\n  [1],\n  [1],\n]\n\nexport const SHAPE_S = [\n  [0, 1, 1],\n  [1, 1, 0],\n]\n\nexport const SHAPE_Z = [\n  [1, 1, 0],\n  [0, 1, 1],\n]\n\nexport const SHAPE_L = [\n  [1,0],\n  [1,0],\n  [1,1],\n]\n\nexport const SHAPE_J = [\n  [0,1],\n  [0,1],\n  [1,1],\n]\n\nexport const SHAPE_T = [\n  [1,1,1],\n  [0,1,0],\n]\n\nexport const allShapes = [\n  CUBE,\n  SHAPE_I,\n  SHAPE_S,\n  SHAPE_Z,\n  SHAPE_L,\n  SHAPE_J,\n  SHAPE_T\n]","export function matrix(h, w) {\n    return Array.from({\n        length: h\n    }, () => new Array(w).fill(0))\n}","module.exports = __parcel__import__.meta.resolve(\"PSiwf\");"],"names":["$parcel$interopDefault","a","__esModule","default","f","$8d6448069697305c$exports","e","c","appendChild","dom","u","d","children","length","style","display","l","document","createElement","cssText","addEventListener","preventDefault","k","performance","Date","now","g","r","Panel","h","self","memory","t","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","domElement","setMode","Infinity","Math","round","window","devicePixelRatio","v","m","n","p","q","width","height","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","w","min","max","drawImage","$19e6dc64dd2777d6$export$aa7c01442f64e45d","$7fa2ef4a82b1aacf$export$7de691058ff51291","x","y","shape","board","startPosition","restart","movePieceDown","isPositionValid","solidifyPiece","movePieceRight","movePieceLeft","rotatePiece","rotatedShape","map","_","index","row","reverse","some","sy","cell","sx","forEach","floor","random","$c2989a971868ffe5$exports","resolve","$761f97bf09d51d3e$var$stats","left","right","body","$761f97bf09d51d3e$var$canvas","querySelector","$761f97bf09d51d3e$var$ctx","$761f97bf09d51d3e$var$board","Array","from","fill","$761f97bf09d51d3e$var$pieceLeft","$761f97bf09d51d3e$var$pieceRight","scale","$761f97bf09d51d3e$var$nextTickTime","$761f97bf09d51d3e$var$drawPiece","piece","hidden","audio","Audio","play","$761f97bf09d51d3e$var$update","time","$761f97bf09d51d3e$var$clearCompletedRows","every","splice","unshift","requestAnimationFrame","evt","key"],"version":3,"file":"bitetris.af7dccb2.js.map"}